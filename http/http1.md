### http/1

### http/0.9 特点

- 只有一个请求行，并没有请求头和请求体，因为只需要一个请求行就可以完整表达客户端的需求。
- 服务器也没有响应头信息，这是因为服务端不需要告诉客户端太多信息，只需要返回数据就OK了。
- 返回的文件内容是以 ASCII 字符流来传输的，因为都是 HTML 格式的文件，所以使用 ASCII 字节码来传输是最合适的。

### http/1.0

通过请求头和响应头来进行协商，在发起请求时会通过HTTP请求头告诉服务器返回什么类型的文件、采取怎样的压缩方式、提供什么语言以及文件的具体编码。

```

请求
accept: text/html  类型
accept-encoding: gzip, deflate, br  压缩方式
accept-Charset: ISO-8859-1,utf-8 字符串编码
accept-language: zh-CN,zh 语言

响应
content-encoding: br 
content-type: text/html; charset=UTF-8
content-language: zh-CN,zh 语言

```

#### 新增特性

- 新增状态码
- 提供 Cache 机制
- 用户代理

### http/1.1

#### 1.改进持久连接

HTTP/1.0 每进行一次 HTTP 通信，都需要经历建立 TCP 连接、传输 HTTP 数据和断开 TCP 连接三个阶段。

HTTP/1.1 中增加了持久连接的方法，它的特点是在一个 TCP 连接上可以传输多个 HTTP 请求，只要浏览器或者服务器没有明确断开连接，那么该 TCP 连接会一直保持。

#### 2.不成熟的 HTTP 管线化

持久连接虽然能减少 TCP 的建立和断开次数，但是它需要等待前面的请求返回之后，才能进行下一次请求。会导致我们常见的队头阻塞。

HTTP/1.1 中试图通过管线化的技术来解决队头阻塞的问题。HTTP/1.1 中的管线化是指将多个 HTTP 请求整批提交给服务器的技术，虽然可以整批发送请求，不过服务器依然需要根据请求顺序来回复浏览器的请求。FireFox、Chrome 都做过管线化的试验，但是由于各种原因，它们最终都放弃了管线化技术。

#### 3.提供虚拟主机支持

HTTP/1.1 的请求头中增加了 Host 字段，用来表示当前的域名地址，这样服务器就可以根据不同的 Host 值做不同的处理。

#### 4.对动态生成的内容提供了完美支持

在设计 HTTP/1.0 时，需要在响应头中设置完整的数据大小，如Content-Length: 901，这样浏览器就可以根据设置的数据大小来接收数据。不过随着服务器端的技术发展，很多页面的内容都是动态生成的，因此在传输数据之前并不知道最终的数据大小，这就导致了浏览器不知道何时会接收完所有的文件数据。

HTTP/1.1 通过引入 Chunk transfer 机制来解决这个问题，服务器会将数据分割成若干个任意大小的数据块，每个数据块发送时会附上上个数据块的长度，最后使用一个零长度的块作为发送数据完成的标志。这样就提供了对动态内容的支持。

#### 5.客户端Cookie、安全机制

记录状态
