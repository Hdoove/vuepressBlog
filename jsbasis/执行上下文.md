### 执行上下文

### 一、执行上下文

#### 1.定义

执行上下文就是当前 JavaScript 代码被解析和执行时所在环境的抽象概念。

#### 2.分类

- 全局执行上下文

创建阶段做了两件事：

1. 创建一个全局对象，也就是window。
2. 将 this 指针指向这个全局对象，一个程序之后一个全局执行上下文。

- 函数执行上下文

- Eval执行上下文

### 二、生命周期

#### 1.创建阶段

当函数被调用时，但未执行任何其内部代码之前，做了三件事

- 创建变量对象：首先初始化函数的参数 arguments，提升函数声明和变量声明。

- 创建作用域链（Scope Chain）：在执行期上下文的创建阶段，作用域链是在变量对象之后创建的。作用域链本身包含变量对象。作用域链用于解析变量。当被要求解析变量时，JavaScript 始终从代码嵌套的最内层开始，如果最内层没有找到变量，就会跳转到上一层父作用域中查找，直到找到该变量。

- 确定 this 指向。

#### 2.执行阶段

执行变量赋值，代码执行

#### 3.回收阶段

执行上下文出栈等待回收。

### 三、执行上下文栈

JavaScript 引擎创建了执行上下文栈来管理执行上下文。可以把执行上下文栈认为是一个存储函数调用的栈结构，遵循先进后出的原则。



